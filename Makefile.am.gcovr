GCOV = @GCOV@
GCOVR = @GCOVR@

gcovr:
if GCOV_ENABLED
	$(GCOVR) --gcov-executable=$(GCOV) -r . -e test
else
	@echo "Need to reconfigure with --enable-gcov"
endif

GCOVR_XML_FILE = coverage.xml

gcovr-xml:
if GCOV_ENABLED
	$(GCOVR) --gcov-executable=$(GCOV) -r . -e test --xml-pretty > $(GCOVR_XML_FILE)
else
	@echo "Need to reconfigure with --enable-gcov"
endif

GCOVR_CLEANFILES = $(GCOVR_XML_FILE)

gcov-clean:
	-rm -f $(GCOVR_CLEANFILES)
	-find . -name "*.gcda" -delete
